{
  "description": "Job Acta Datos Generales",
  "requiredContexts": [
    "user",
    "job"
  ],
  "executionMode": "FG",
  "tasks": [
    {
      "name": "t1",
      "reader": {
        "type": "sqlreader",
        "dbFile": "${params.dbFile}",
        "sqlQuery": "SELECT acta_toma_muestra.acta_id ACTA_ID, acta_toma_muestra.acta ACTA, formato || ' ' || revision FORMATO, operador.razon_social RAZON_SOCIAL, operador.tipo_via_operador || ' ' || operador.via_operador || ' ' || localidad_operador.d_exten_loca || ', ' || provincia_operador.d_exten_prov || ' ' || operador.codigo_postal_operador || '-' || operador.pais DOMICILIO_SOCIAL, operador.direccion_instalacion || ' ' || localidad_instalacion.d_exten_loca || ', ' || provincia_instalacion.d_exten_prov || ' ' || operador.codigo_postal_instalacion || '-' || operador.pais DIRECCION_INSTALACION, operador.nif_operador NIF_OPERADOR, operador.nif_representante NIF_REPRESENTANTE, operador.nombre_representante || ' ' || apellidos_representante NOMBRE_REPRESENTANTE, acta_toma_muestra.nombre_toma_muestra NOMBRE, acta_toma_muestra.apellidos_toma_muestra APELLIDOS, acta_toma_muestra.dni_toma_muestra DNI, acta_toma_muestra.operador_renuncia OPERADOR_RENUNCIA, acta_toma_muestra.entrega_inspeccionado ENTREGA_INSPECCIONADO, acta_toma_muestra.observaciones_entrega_inspeccionado OBSERVACIONES_ENTREGA_INSPECCIONADO, acta_toma_muestra.fecha_firma FECHA_FIRMA FROM acta_toma_muestra LEFT OUTER JOIN expediente ON acta_toma_muestra.expediente_id = expediente.expediente_id LEFT OUTER JOIN operador ON expediente.operador_id = operador.operador_id LEFT OUTER JOIN comu_localidad_21 localidad_operador ON operador.localidad_operador_id = localidad_operador.c_localidad_id LEFT OUTER JOIN comu_provincia provincia_operador ON operador.provincia_operador_id = provincia_operador.c_provincia LEFT OUTER JOIN comu_localidad_21 localidad_instalacion ON operador.localidad_instalacion_id = localidad_instalacion.c_localidad_id LEFT OUTER JOIN comu_provincia provincia_instalacion ON operador.provincia_instalacion_id = provincia_instalacion.c_provincia WHERE acta_toma_muestra.expediente_id='${params.expediente_id}'"
      },
      "writer": {
        "type": "csvWriter"
      }
    }
  ]
}