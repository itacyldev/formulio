<main name="auditoria" description="Auditorias" id="idAuditoria" repo="auditoriaRepo">
    <list id="listAuditoria" name="Auditoria" description="Listado auditorias">
        <datatable properties="auditoria_id,fecha" route="idAuditoria-editAuditoria1"/>
        <buttonbar type="fab">
            <button id="createButton" action="createAuditoria"/>
        </buttonbar>

        <actions>
            <action id="createAuditoria" type="create" route="idAuditoria-editAuditoria2">
                <param name="repo" value="auditoriaRepo"/>
                <param name="fecha" value="${date.now}"/>
            </action>
        </actions>

        <!--<actions>
            <create route="idAuditoria-editAuditoria2">
                <param name="repo" value="auditoriaRepo"/>
                <param name="fecha" value="${date.now}"/>
            </create>
        </actions>-->


    </list>
    <edit id="editAuditoria1">
        <form>
            <datatable repo="preguntaAuditoriaRepo" route="idAuditoria-editAuditoria2">
                <param name="entityId" value="${entity.auditoria_id}"/>
                <repofilter>
                    <and>
                        <eq property="auditoria_id" value="${empty(entity.auditoria_id) ? '-1' : entity.auditoria_id}" />
                    </and>
                </repofilter>
            </datatable>
        </form>
    </edit>
    <edit id="editAuditoria2"  >
        <!--
        <script src="scripts/auditoria.js">
        </script>
        -->
        <form>

            <input label="Id. auditoria: " id="newAuditoria" readonly="true" value="${params.entityId}"/>
            <!--<datatable repo="preguntaAuditoriaRepo" properties="pregunta.texto_pregunta, respuesta, observaciones">
                <repofilter>
                    <eq property="auditoria_id" value="${view.newAuditoria}"/>
                </repofilter>
            </datatable>-->

            <!--<radio id="pruebaRespuesta" value="" orientation="horizontal" action="showObservaciones" hasDeleteButton="false" refresh="pruebaObservaciones">
                <options>
                    <option id="optionPruebaOK" label="ok" value="ok" />
                    <option id="optionPruebaObs" label="obs" value="obs" />
                    <option id="optionPruebaNC" label="nc" value="nc" />
                </options>
            </radio>
            <textarea id="pruebaObservaciones" label="Observaciones prueba" value="" render="${view.pruebaRespuesta eq 'obs'}"/>-->
            <tab>
                <tabitem label="Datos generales bodega" id="datosGeneralesBodega">
                    <button id="botonDatosGeneralesBodega" label="GUARDAR">
                        <action type="save" controller="datalistDatosGeneralesBodega"/>
                    </button>

                    <datalist id="datalistDatosGeneralesBodega" repo="preguntaAuditoriaRepo">
                        <repofilter>
                            <and>
                                <eq property="auditoria_id" value="${params.entityId}"/>
                                <eq property="tab_id" value="datosGeneralesBodega"/>
                            </and>
                        </repofilter>
                        <datalistitem>
                            <head bold="true" value="${entity.pregunta.texto_pregunta}"/>
                            <radio id="respuestaDatosGeneralesBodega" value="${entity.respuesta}" orientation="horizontal"  hasDeleteButton="false" hint="${entity.pregunta.desc_observaciones}">
                                <options>
                                    <option id="optionDatosGeneralesBodegaOK" label="ok" value="ok" />
                                    <option id="optionDatosGeneralesBodegaObs" label="obs" value="obs" />
                                    <option id="optionDatosGeneralesBodegaNC" label="nc" value="nc" />
                                </options>
                            </radio>
                            <input label="1. Input: " value="" validator="required" hint="${entity.pregunta.desc_observaciones}" />
                            <textarea label="Observaciones" value="${entity.observaciones}" render="${view.respuestaEntradaDeUva eq 'obs'}"  hint="${entity.pregunta.desc_observaciones}"/>
                        </datalistitem>
                    </datalist>
                </tabitem>

                <tabitem label="Entrada de uva" id="entradaDeUva">
                    <button id="botonEntradaDeUva" label="GUARDAR">
                        <action type="save" controller="datalistEntradaDeUva"/>
                    </button>

                    <datalist id="datalistEntradaDeUva" repo="preguntaAuditoriaRepo">
                        <repofilter>
                            <and>
                                <eq property="auditoria_id" value="${params.entityId}"/>
                                <eq property="tab_id" value="entradaDeUva"/>
                            </and>
                        </repofilter>
                        <datalistitem>
                            <head bold="true" value="${entity.pregunta.texto_pregunta}"/>
                            <radio id="respuestaEntradaDeUva" value="${entity.respuesta}" orientation="horizontal"  hasDeleteButton="false" hint="${entity.pregunta.desc_observaciones}">
                                <options>
                                    <option id="optionEntradaDeUvaOK" label="ok" value="ok" />
                                    <option id="optionEntradaDeUvaObs" label="obs" value="obs" />
                                    <option id="optionEntradaDeUvaNC" label="nc" value="nc" />
                                </options>
                            </radio>
                            <textarea label="Observaciones" value="${entity.observaciones}" render="${view.respuestaEntradaDeUva eq 'obs'}" hint="${entity.pregunta.desc_observaciones}"/>
                        </datalistitem>
                    </datalist>
                </tabitem>

                <tabitem label="ElaboraciÃ³n" id="elaboracion">
                    <button id="botonElaboracion" label="GUARDAR">
                        <action type="save" controller="datalistElaboracion"/>
                    </button>

                    <datalist id="datalistElaboracion" repo="preguntaAuditoriaRepo">
                        <repofilter>
                            <and>
                                <eq property="auditoria_id" value="${params.entityId}"/>
                                <eq property="tab_id" value="elaboracion"/>
                            </and>
                        </repofilter>
                        <datalistitem>
                            <head bold="true" value="${entity.pregunta.texto_pregunta}"/>
                            <radio id="respuestaElaboracion" value="${entity.respuesta}" orientation="horizontal"  hasDeleteButton="false" hint="${entity.pregunta.desc_observaciones}">
                                <options>
                                    <option id="optionElaboracionOK" label="ok" value="ok" />
                                    <option id="optionElaboracionObs" label="obs" value="obs" />
                                    <option id="optionElaboracionNC" label="nc" value="nc" />
                                </options>
                            </radio>
                            <textarea label="Observaciones" value="${entity.observaciones}" render="${view.respuestaElaboracion eq 'obs'}"/>
                        </datalistitem>
                    </datalist>
                </tabitem>

                <tabitem label="Almacenamiento" id="almacenamiento">
                    <button id="botonAlmacenamiento" label="GUARDAR">
                        <action type="save" controller="datalistAlmacenamiento"/>
                    </button>

                    <datalist id="datalistAlmacenamiento" repo="preguntaAuditoriaRepo">
                        <repofilter>
                            <and>
                                <eq property="auditoria_id" value="${params.entityId}"/>
                                <eq property="tab_id" value="almacenamiento"/>
                            </and>
                        </repofilter>
                        <datalistitem>
                            <head bold="true" value="${entity.pregunta.texto_pregunta}"/>
                            <radio id="respuestaAlmacenamiento" value="${entity.respuesta}" orientation="horizontal"  hasDeleteButton="false" hint="${entity.pregunta.desc_observaciones}">
                                <options>
                                    <option id="optionAlmacenamientoOK" label="ok" value="ok" />
                                    <option id="optionAlmacenamientoObs" label="obs" value="obs" />
                                    <option id="optionAlmacenamientoNC" label="nc" value="nc" />
                                </options>
                            </radio>
                            <textarea label="Observaciones" value="${entity.observaciones}" render="${view.respuestaAlmacenamiento eq 'obs'}"/>
                        </datalistitem>
                    </datalist>
                </tabitem>

                <tabitem label="Crianza" id="crianza">
                    <button id="botonCrianza" label="GUARDAR">
                        <action type="save" controller="datalistCrianza"/>
                    </button>
                    <datalist id="datalistCrianza" repo="preguntaAuditoriaRepo">
                        <repofilter>
                            <and>
                                <eq property="auditoria_id" value="${params.entityId}"/>
                                <eq property="tab_id" value="crianza"/>
                            </and>
                        </repofilter>
                        <datalistitem>
                            <head bold="true" value="${entity.pregunta.texto_pregunta}"/>
                            <radio id="respuestaCrianza" value="${entity.respuesta}" orientation="horizontal"  hasDeleteButton="false" hint="${entity.pregunta.desc_observaciones}">
                                <options>
                                    <option id="optionCrianzaOK" label="ok" value="ok" />
                                    <option id="optionCrianzaObs" label="obs" value="obs" />
                                    <option id="optionCrianzaNC" label="nc" value="nc" />
                                </options>
                            </radio>
                            <textarea label="Observaciones" value="${entity.observaciones}" render="${view.respuestaCrianza eq 'obs'}" />
                        </datalistitem>
                    </datalist>
                </tabitem>

                <tabitem label="Embotellado y Etiquetado" id="embotelladoEtiquetado">
                    <button id="botonEmbotelladoEtiquetado" label="GUARDAR">
                        <action type="save" controller="datalistEmbotelladoEtiquetado"/>
                    </button>
                    <datalist id="datalistEmbotelladoEtiquetado" repo="preguntaAuditoriaRepo">
                        <repofilter>
                            <and>
                                <eq property="auditoria_id" value="${params.entityId}"/>
                                <eq property="tab_id" value="embotelladoEtiquetado"/>
                            </and>
                        </repofilter>
                        <datalistitem>
                            <head bold="true" value="${entity.pregunta.texto_pregunta}"/>
                            <radio id="respuestaEmbotelladoEtiquetado" value="${entity.respuesta}" orientation="horizontal"  hasDeleteButton="false" hint="${entity.pregunta.desc_observaciones}">
                                <options>
                                    <option id="optionEmbotelladoEtiquetadoOK" label="ok" value="ok" />
                                    <option id="optionEmbotelladoEtiquetadoObs" label="obs" value="obs" />
                                    <option id="optionEmbotelladoEtiquetadoNC" label="nc" value="nc" />
                                </options>
                            </radio>
                            <textarea label="Observaciones" value="${entity.observaciones}" render="${view.respuestaEmbotelladoEtiquetado eq 'obs'}"/>
                        </datalistitem>
                    </datalist>
                </tabitem>
            </tab>

            <!--<datalistitem>
                <table weights="78, 22">
                    <row>
                        <textarea id="pregunta" value="${entity.pregunta.texto_pregunta}" readonly="true" />
                        <button label="ok" />
                    </row>
                    <row colspan="2">
                        <radio id="respuesta" value="${entity.respuesta}" orientacion="horizontal">
                            <options>
                                <option label="ok" value="ok" />
                                <option label="obs" value="obs" />
                                <option label="nc" value="nc" />
                            </options>
                        </radio>
                    </row>
                    <row colspan="2">
                        <textarea id="observaciones" label="Observaciones" value="${entity.observaciones}" />
                    </row>
                </table>
            </datalistitem>
        </datalist>-->
        </form>
        <actions>
            <save label="Save" route="idAuditoria-listAuditoria" registerInHistory="false" controller="form1"/>
            <cancel label="Cancel" route="idAuditoria-listAuditoria"/>
        </actions>
    </edit>
</main>
