<main name="auditoria" description="Auditorias" id="idAuditoria" repo="auditoriaRepo">
    <list id="listAuditoria" name="PROTOCOLO II" description="PROTOCOLO INFORMACIÓN AL CONSUMIDOR EN VENTA A DISTANCIA DE PRODUCTOS ALIMENTICIOS CALIDAD DIFERENCIADA (DOP-IGP y ETG)">
        <datatable>
            <column id="column_auditoria_id" headerText="Auditoría" filtering="true" ordering="true" value="${entity.auditoria_id}">
                <filter property="auditoria_id" matching="contains" valueExpression="${this.column_auditoria_id}"/>
                <order property="auditoria_id"/>
            </column>
            <column id="column_fecha" headerText="Fecha" filtering="true" ordering="true" value="${entity.fecha}">
                <filter property="auditoria_id" matching="contains" valueExpression="${this.column_fecha}"/>
                <order property="fecha"/>
            </column>
            <column id="column_num_expediente" headerText="Nº Expediente" filtering="true" ordering="true" value="${entity.num_expediente}">
                <filter property="num_expediente" matching="contains" valueExpression="${this.column_num_expediente}"/>
                <order property="num_expediente"/>
            </column>
            <action type="nav" route="idAuditoria-editAuditoria2"/>
        </datatable>

        <buttonbar type="fab">
            <button id="createButton">
                <action id="createAuditoria" type="create" route="idAuditoria-editAuditoria2" >
                    <param name="repo" value="auditoriaRepo"/>
                    <param name="fecha" value="${date.now}"/>
                </action>
            </button>
        </buttonbar>

    </list>
    <edit id="editAuditoria2">
        <form>
            <p value=""/>
            <divisor color="#00766C" strokeWidth="10" />
            <p bold="true" value="PROTOCOLO DE CONTROL DE LA INFORMACIÓN AL CONSUMIDOR EN LA VENTA A DISTANCIA DE PRODUCTOS ALIMENTICIOS CON CALIDAD DIFERENCIADA: DENOMINACIÓN DE ORIGEN (DOP), INDICACIÓN GEOGRÁFICA (IGP) O ESPECIALIDAD TRADICIONAL GARANTIZADA (ETG)" fontSize="20"/>
            <divisor color="#00766C" strokeWidth="10" />

            <table border="false">
                <row>
                    <input label="Id. auditoria: " id="newAuditoria" readonly="true" placeHolder="${params.entityId}" value="${entity.auditoria_id}" />
                    <button label="Cuestionario">
                        <action type="save" route="idPreguntaAuditoria-editPreguntaAuditoria">
                            <param name="auditoria_id" value="${entity.auditoria_id}"/>
                            <param name="num_expediente" value="${view.numExpediente}"/>
                            <param name="fecha" value="${view.fecha}"/>
                        </action>
                    </button>
                </row>
            </table>

            <p value=""/>
            <divisor color="#00766C" strokeWidth="8" />
            <p bold="true" value="DATOS GENERALES"/>
            <divisor color="#00766C" strokeWidth="8" />

            <table border="false">
                <row>
                    <input label="Nº Expediente: " id="numExpediente" value="${entity.num_expediente}" validator="required" inputType="3"/>
                    <date label="Fecha:           " id="fecha" value="${entity.fecha}"  validator="required"/>
                </row>
                <row>
                    <autocomplete forceSelection="true" id="grupoProducto" label="Grupo de producto objeto de control: " repo="grupoProductoRepo" value="${entity.grupo_producto_id}">
                        <options labelExpression="${entity.nombre_grupo_producto}" labelFilteringProperty="nombre_grupo_producto" valueProperty="grupo_producto_id" />
                    </autocomplete>
                    <table border="false">
                        <row weights="40, 60">
                            <button label="Añadir grupo">
                                <action type="save" route="grupoProducto-editGrupoProducto">
                                    <param name="auditoria_id" value="${entity.auditoria_id}" />
                                </action>
                            </button>
                            <p label=""/>
                        </row>
                    </table>
                </row>
                <row colspan="2">
                    <select label="Equipo auditor: " value="${entity.equipo_auditor}">
                        <options>
                            <option value="Teresa Yañez Colomo" label="Teresa Yañez Colomo"/>
                            <option value="Emilio Rodrigo Ramos" label="Emilio Rodrigo Ramos" />
                            <option value="José Ignacio Marqués Rodríguez" label="José Ignacio Marqués Rodríguez" />
                            <option value="Cristina Rebollo Acebes" label="Cristina Rebollo Acebes" />
                            <option value="Inmaculada Sáez González" label="Inmaculada Sáez González" />
                            <option value="Irene Lara Hergueras" label="Irene Lara Hergueras" />
                            <option value="Jesús Durán Martín" label="Jesús Durán Martín" />
                            <option value="Juan Carlos González Ruíz" label="Juan Carlos González Ruíz" />
                            <option value="Mª Montserrat Gil Pérez" label="Mª Montserrat Gil Pérez" />
                            <option value="Manuel Fernández Calderón" label="Manuel Fernández Calderón" />
                            <option value="Maria del Carmen Melendre Frías" label="Maria del Carmen Melendre Frías" />
                            <option value="Marta Martín Álvarez" label="Marta Martín Álvarez" />
                            <option value="Ruth Franco Fernández" label="Ruth Franco Fernández" />
                            <option value="Sátur Jiménez Andrés" label="Sátur Jiménez Andrés" />
                            <option value="Óscar Díez Sánchez" label="Óscar Díez Sánchez" />
                        </options>
                    </select>
                </row>
            </table>

            <p value=""/>
            <divisor color="#00766C" strokeWidth="8" />
            <p bold="true" value="IDENTIFICACIÓN DEL MEDIO DE VENTA A DISTANCIA"/>
            <divisor color="#00766C" strokeWidth="8" />

            <table border="false">
                <row colspan="2">
                    <input label="Medio: " value="${entity.url_medio}" hint="URL de la página web, en su caso"/>
                </row>

                <row colspan="2">
                    <input label="Responsable del medio: " value="${entity.responsable_medio}" hint="Página web, en su caso"/>
                </row>

                <row colspan="2">
                    <input label="NIF: " value="${entity.nif}" />
                </row>

                <row colspan="2">
                    <input label="Domicilio del responsable del medio: " value="${entity.domicilio_responsable}" hint="Página web, en su caso"/>
                </row>
                <row>
                    <autocomplete forceSelection="true" id="provincia" label="Provincia: " repo="provRepo" value="${entity.prov_id}">
                        <options labelExpression="${entity.name}" labelFilteringProperty="name" valueProperty="id" />
                    </autocomplete>
                    <autocomplete forceSelection="true" id="provmuni" label="Municipio: " repo="muniRepo" value="${entity.provmuni_id}">
                        <options labelExpression="${entity.name}" labelFilteringProperty="name" valueProperty="provmuni" />
                        <repofilter>
                            <eq property="prov" value="${view.provincia}" mandatory="true"/>
                            <contains property="name" value="${this.value}"/>
                        </repofilter>
                    </autocomplete>
                </row>
                <row>
                    <input label="Telefono: " value="${entity.telefono}"/>
                    <input label="Correo electrónico: " value="${entity.email}"/>
                </row>
            </table>

            <p value=""/>
            <divisor color="#00766C" strokeWidth="8" />
            <p bold="true" value="IDENTIFICACIÓN DEL PRODUCTO"/>
            <divisor color="#00766C" strokeWidth="8" />

            <table border="false">
                <row colspan="2">
                    <input label="Denominación del producto: " value="${entity.denominacion_producto}" />
                </row>

                <row colspan="2">
                    <input label="Nombre comercial del producto: " value="${entity.nombre_comercial_producto}" />
                </row>
                <row colspan="2">
                    <input label="Marca: " value="${entity.marca}" />
                </row>
                <row colspan="2">
                    <radio label="Modo de presentación: " value="${entity.modo_presentacion}" orientation="horizontal" weights="20, 20" hint="Pieza entera, troceado, loncheado, fileteado, embotellado,…">
                        <options>
                            <option id="optionEnvasado" label="Envasado" value="Envasado" />
                            <option id="optionNoEnvasado" label="No envasado" value="No envasado" />
                        </options>
                    </radio>
                </row>
            </table>

            <p value=""/>
            <divisor color="#00766C" strokeWidth="8" />
            <p bold="true" value="FIRMA"/>
            <divisor color="#00766C" strokeWidth="8" />

            <table border="false" weights="30, 20, 50">
                <row>
                    <p bold="true" value="Firma"/>
                    <switcher id="switcherFirma" value="${not empty(entity.firma)?1:0}"/>
                    <p value=""/>
                </row>
            </table>
            <table border="false" weights="10, 90">
                <row>
                    <p value=""/>
                    <image id="imageFirma" converter="b64Image" embedded="true" value="${entity.firma}" render="${view.switcherFirma eq 'true'}" hasDeleteButton="false" inputType="4"/>
                </row>
            </table>
        </form>

        <buttonbar type="bottom">
            <button label="Save">
                <action route="idAuditoria-listAuditoria" type="save" registerInHistory="false" popHistory="1"/>
            </button>
            <button label="Cancel" route="back"/>
        </buttonbar>
    </edit>
</main>
