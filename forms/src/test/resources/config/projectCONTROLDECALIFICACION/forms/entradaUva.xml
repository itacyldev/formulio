<main id="entradaUva" name="Entrada de uva" repo="entradaUvaRepo" mainForm="false">
    <list id="listEntradaUva" name="Entrada de uva" description="Listado entrada de uva">
        <datatable>
            <column id="column_fecha_entrada_uva" headerText="Fecha" filtering="true" ordering="true" value="${entity.fecha_entrada_uva}">
                <filter property="fecha_entrada_uva" matching="contains" valueExpression="${this.column_fecha_entrada_uva}"/>
                <order property="fecha_entrada_uva"/>
            </column>
            <column id="column_acta" headerText="Nº Exp." filtering="false" ordering="false" value="${entity.acta.numero_acta}"/>
            <column id="column_variedad" headerText="Variedad" filtering="false" ordering="false" value="${entity.variedad.variedad}"/>
            <column id="column_cantidad_kg" headerText="Cantidad (Kg)" filtering="true" ordering="true" value="${entity.cantidad_kg}">
                <filter property="cantidad_kg" matching="contains" valueExpression="${this.column_cantidad_kg}"/>
                <order property="cantidad_kg"/>
            </column>
            <column id="column_deposito_destino" headerText="Depósito de destino" filtering="true" ordering="true" value="${entity.deposito_destino}">
                <filter property="deposito_destino" matching="contains" valueExpression="${this.column_deposito_destino}"/>
                <order property="deposito_destino"/>
            </column>
        </datatable>
        <buttonbar type="fab"/>
    </list>
    <edit id="editEntradaUva">
        <form id="formEntradaUva">

            <p value=""/>
            <p backgroundColor="#26a69a" fontSize="22" fontColor="#FFFFFF" bold="true" value="ENTRADA DE UVA"/>

            <p value=""/>
            <divisor color="#00766C" strokeWidth="8" />
            <p bold="true" value="ACTA: "/>
            <divisor color="#00766C" strokeWidth="8" />

            <table border="false">
                <row>
                    <table headerText=" Id. Acta., Nº Acta " weights="25, 75" >
                        <row>
                            <input value="${entity.acta_id}" placeHolder="${not empty(params.acta_id)?params.acta_id:null}" readonly="true"/>
                            <textarea value="${entity.acta.numero_acta}" placeHolder="${not empty(params.numero_acta)?params.numero_acta:null}" readonly="true" />
                        </row>
                    </table>
                </row>
            </table>

            <p value=""/>
            <divisor color="#00766C" strokeWidth="8" />
            <p bold="true" value="ENTRADA DE UVA: "/>
            <divisor color="#00766C" strokeWidth="8" />

            <input label="Fecha: " value="${entity.fecha_entrada_uva}" />

            <autocomplete id="variedad_id" label="Variedad: " forceSelection="true" repo="variedadRepo" value="${entity.variedad_id}" validator="required">
                <options labelExpression="${entity.variedad}" labelFilteringProperty="variedad" valueProperty="variedad_id" />
            </autocomplete>

            <input label="Cantidad (Kg)" value="${entity.cantidad_kg}" inputType="3"/>

            <input label="Depósito de destino" value="${entity.deposito_destino}" inputType="3"/>

        </form>
        <buttonbar type="bottom">
            <button label="Save">
                <action type="save" route="back" registerInHistory="false">
                    <param name="entityId" value="${params.acta_id}" />
                </action>
            </button>

            <button label="Cancel">
                <action type="cancel" route="back" restoreView="true">
                    <param name="entityId" value="${params.acta_id}" />
                </action>
            </button>

            <button label="Delete" readonly="${empty (entity.entrada_uva_id)}" readonlyMessage="No puede realizar esta acción: No existe entrada de uva">
                <action type="delete" route="back" registerInHistory="false">
                    <param name="entityId" value="${params.acta_id}" />
                </action>
            </button>
        </buttonbar>
    </edit>
</main>
