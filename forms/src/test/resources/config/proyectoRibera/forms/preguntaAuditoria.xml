<main name="preguntaAuditoria" description="Preguntas Auditoria" id="idPreguntaAuditoria" repo="preguntaAuditoriaRepo">
    <edit id="editPreguntaAuditoria" repo="auditoriaRepo">
        <input id="auditoriaId" label="Id. auditoria:" value="${entity.auditoria_id}" placeHolder="${params.auditoria_id}" readonly="true"/>
        <tab>
                <tabitem label="Datos generales bodega" id="datosGeneralesBodega">
                    <datalist id="datalistDatosGeneralesBodega" repo="preguntaAuditoriaRepo">
                        <repofilter>
                            <and>
                                <eq property="auditoria_id" value="${params.auditoria_id}"/>
                                <eq property="tab_id" value="datosGeneralesBodega"/>
                            </and>
                        </repofilter>
                        <datalistitem>
                            <divisor color="#00766C" strokeWidth="2" />
                            <radio id="respuestaDatosGeneralesBodega" label="${entity.pregunta.texto_pregunta}" value="${entity.respuesta}" orientation="horizontal"  hint="${entity.pregunta.desc_observaciones}" validator="required">
                                <options>
                                    <option id="optionDatosGeneralesBodegaOK" label="ok" value="ok" />
                                    <option id="optionDatosGeneralesBodegaObs" label="obs" value="obs" />
                                    <option id="optionDatosGeneralesBodegaNC" label="nc" value="nc" />
                                    <option id="optionDatosGeneralesBodegaNA" label="na" value="na" />
                                </options>
                            </radio>
                            <textarea id="observacionesDatosGeneralesBodega" label="Observaciones" value="${entity.observaciones}" render="${view.respuestaDatosGeneralesBodega eq 'obs'}" validator="required"/>

                            <table border="false" weights="30, 20, 50">
                                <row>
                                    <p bold="true" value="Añadir imagen"/>
                                    <switcher id="switcherDatosGeneralesBodega" value="${not empty(entity.image_thumb)?1:0}"/>
                                    <p value=""/>
                                </row>
                            </table>
                            <image converter="b64Image" embedded="true" label="Imagen: " value="${entity.image_thumb}" render="${view.switcherDatosGeneralesBodega eq 'true'}" hasDeleteButton="false" inputType="3"/>
                            <!--<image label="Imagen: " repo="auditoriaImages" value="${entity.pregunta_id}+'.jpg'" render="${view.switcherDatosGeneralesBodega eq 'true'}" />-->
                        </datalistitem>
                    </datalist>
                </tabitem>
            <tabitem label="Entrada de uva" id="entradaDeUva">
                <datalist id="datalistEntradaDeUva" repo="preguntaAuditoriaRepo">
                    <repofilter>
                        <and>
                            <eq property="auditoria_id" value="${params.auditoria_id}"/>
                            <eq property="tab_id" value="entradaDeUva"/>
                        </and>
                    </repofilter>
                    <datalistitem>
                        <divisor color="#00766C" strokeWidth="2" />
                        <radio id="respuestaEntradaDeUva" label="${entity.pregunta.texto_pregunta}" value="${entity.respuesta}" orientation="horizontal"  hint="${entity.pregunta.desc_observaciones}" validator="required">
                            <options>
                                <option id="optionEntradaDeUvaOK" label="ok" value="ok" />
                                <option id="optionEntradaDeUvaObs" label="obs" value="obs" />
                                <option id="optionEntradaDeUvaNC" label="nc" value="nc" />
                                <option id="optionEntradaDeUvaNA" label="na" value="na" />
                            </options>
                        </radio>
                        <textarea id="observacionesEntradaDeUva" label="Observaciones" value="${entity.observaciones}" render="${view.respuestaEntradaDeUva eq 'obs'}" validator="required"/>
                        <table border="false" weights="30, 20, 50">
                            <row>
                                <p bold="true" value="Añadir imagen"/>
                                <switcher id="switcherEntradaDeUva" value="${not empty(entity.image_thumb)?1:0}"/>
                                <p value=""/>
                            </row>
                        </table>
                        <image converter="b64Image" embedded="true" label="Imagen: " value="${entity.image_thumb}" render="${view.switcherEntradaDeUva eq 'true'}" hasDeleteButton="false" />
                    </datalistitem>
                </datalist>
            </tabitem>

            <tabitem label="Elaboración" id="elaboracion">
                <datalist id="datalistElaboracion" repo="preguntaAuditoriaRepo">
                    <repofilter>
                        <and>
                            <eq property="auditoria_id" value="${params.auditoria_id}"/>
                            <eq property="tab_id" value="elaboracion"/>
                        </and>
                    </repofilter>
                    <datalistitem>
                        <divisor color="#00766C" strokeWidth="2" />
                        <radio id="respuestaElaboracion" label="${entity.pregunta.texto_pregunta}" value="${entity.respuesta}" orientation="horizontal"  hint="${entity.pregunta.desc_observaciones}" validator="required">
                            <options>
                                <option id="optionElaboracionOK" label="ok" value="ok" />
                                <option id="optionElaboracionObs" label="obs" value="obs" />
                                <option id="optionElaboracionNC" label="nc" value="nc" />
                                <option id="optionElaboracionNA" label="na" value="na" />
                            </options>
                        </radio>
                        <textarea id="observacionesElaboracion" label="Observaciones" value="${entity.observaciones}" render="${view.respuestaElaboracion eq 'obs'}" validator="required"/>
                        <table border="false" weights="30, 20, 50">
                            <row>
                                <p bold="true" value="Añadir imagen"/>
                                <switcher id="switcherElaboracion" value="${not empty(entity.image_thumb)?1:0}"/>
                                <p value=""/>
                            </row>
                        </table>
                        <image converter="b64Image" embedded="true" label="Imagen: " value="${entity.image_thumb}" render="${view.switcherElaboracion eq 'true'}" hasDeleteButton="false" />
                    </datalistitem>
                </datalist>
            </tabitem>

            <tabitem label="Almacenamiento" id="almacenamiento">
                <datalist id="datalistAlmacenamiento" repo="preguntaAuditoriaRepo">
                    <repofilter>
                        <and>
                            <eq property="auditoria_id" value="${params.auditoria_id}"/>
                            <eq property="tab_id" value="almacenamiento"/>
                        </and>
                    </repofilter>
                    <datalistitem>
                        <divisor color="#00766C" strokeWidth="2" />
                        <radio id="respuestaAlmacenamiento" label="${entity.pregunta.texto_pregunta}" value="${entity.respuesta}" orientation="horizontal"  hint="${entity.pregunta.desc_observaciones}" validator="required">
                            <options>
                                <option id="optionAlmacenamientoOK" label="ok" value="ok" />
                                <option id="optionAlmacenamientoObs" label="obs" value="obs" />
                                <option id="optionAlmacenamientoNC" label="nc" value="nc" />
                                <option id="optionAlmacenamientoNA" label="na" value="na" />
                            </options>
                        </radio>
                        <textarea id="observacionesAlmacenamiento" label="Observaciones" value="${entity.observaciones}" render="${view.respuestaAlmacenamiento eq 'obs'}" validator="required"/>
                        <table border="false" weights="30, 20, 50">
                            <row>
                                <p bold="true" value="Añadir imagen"/>
                                <switcher id="switcherAlmacenamiento" value="${not empty(entity.image_thumb)?1:0}"/>
                                <p value=""/>
                            </row>
                        </table>
                        <image converter="b64Image" embedded="true" label="Imagen: " value="${entity.image_thumb}" render="${view.switcherAlmacenamiento eq 'true'}" hasDeleteButton="false" />
                    </datalistitem>
                </datalist>
            </tabitem>

            <tabitem label="Crianza" id="crianza">
                <datalist id="datalistCrianza" repo="preguntaAuditoriaRepo">
                    <repofilter>
                        <and>
                            <eq property="auditoria_id" value="${params.auditoria_id}"/>
                            <eq property="tab_id" value="crianza"/>
                        </and>
                    </repofilter>
                    <datalistitem>
                        <divisor color="#00766C" strokeWidth="2" />
                        <radio id="respuestaCrianza" label="${entity.pregunta.texto_pregunta}" value="${entity.respuesta}" orientation="horizontal"  hint="${entity.pregunta.desc_observaciones}" validator="required">
                            <options>
                                <option id="optionCrianzaOK" label="ok" value="ok" />
                                <option id="optionCrianzaObs" label="obs" value="obs" />
                                <option id="optionCrianzaNC" label="nc" value="nc" />
                                <option id="optionCrianzaNA" label="na" value="na" />
                            </options>
                        </radio>
                        <textarea id="observacionesCrianza" label="Observaciones" value="${entity.observaciones}" render="${view.respuestaCrianza eq 'obs'}" validator="required"/>
                        <table border="false" weights="30, 20, 50">
                            <row>
                                <p bold="true" value="Añadir imagen"/>
                                <switcher id="switcherCrianza" value="${not empty(entity.image_thumb)?1:0}"/>
                                <p value=""/>
                            </row>
                        </table>
                        <image converter="b64Image" embedded="true" label="Imagen: " value="${entity.image_thumb}" render="${view.switcherCrianza eq 'true'}" hasDeleteButton="false" />
                    </datalistitem>
                </datalist>
            </tabitem>

            <tabitem label="Embotellado y Etiquetado" id="embotelladoEtiquetado">
                <datalist id="datalistEmbotelladoEtiquetado" repo="preguntaAuditoriaRepo">
                    <repofilter>
                        <and>
                            <eq property="auditoria_id" value="${params.auditoria_id}"/>
                            <eq property="tab_id" value="embotelladoEtiquetado"/>
                        </and>
                    </repofilter>
                    <datalistitem>
                        <divisor color="#00766C" strokeWidth="2" />
                        <radio id="respuestaEmbotelladoEtiquetado" label="${entity.pregunta.texto_pregunta}" value="${entity.respuesta}" orientation="horizontal"  hint="${entity.pregunta.desc_observaciones}" validator="required">
                            <options>
                                <option id="optionEmbotelladoEtiquetadoOK" label="ok" value="ok" />
                                <option id="optionEmbotelladoEtiquetadoObs" label="obs" value="obs" />
                                <option id="optionEmbotelladoEtiquetadoNC" label="nc" value="nc" />
                                <option id="optionEmbotelladoEtiquetadoNA" label="na" value="na" />
                            </options>
                        </radio>
                        <textarea id="observacionesEmbotelladoEtiquetado" label="Observaciones" value="${entity.observaciones}" render="${view.respuestaEmbotelladoEtiquetado eq 'obs'}" validator="required"/>
                        <table border="false" weights="30, 20, 50">
                            <row>
                                <p bold="true" value="Añadir imagen"/>
                                <switcher id="switcherEmbotelladoEtiquetado" value="${not empty(entity.image_thumb)?1:0}"/>
                                <p value=""/>
                            </row>
                        </table>
                        <image converter="b64Image" embedded="true" label="Imagen: " value="${entity.image_thumb}" render="${view.switcherEmbotelladoEtiquetado eq 'true'}" hasDeleteButton="false" />
                    </datalistitem>
                </datalist>
            </tabitem>
            </tab>
        <buttonbar type="bottom">
            <button label="Save">
                <action route="back" type="save" registerInHistory="false" controller="datalistDatosGeneralesBodega, datalistEntradaDeUva, datalistElaboracion, datalistAlmacenamiento, datalistCrianza, datalistEmbotelladoEtiquetado">
                    <param name="entityId" value="${params.auditoria_id}"/>
                </action>
            </button>
            <button label="Cancel" route="back"/>
        </buttonbar>
    </edit>
</main>
