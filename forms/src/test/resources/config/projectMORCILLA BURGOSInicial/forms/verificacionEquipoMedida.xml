<main id="verifEquipoMedida" name="Verif. equipos de medida" repo="verificacionEquipoMedidaRepo" mainForm="false">
    <list id="listVerifEquiposMedida" name="Verif. equipos de medida" description="Listado verificación equipos">
       <!--<datatable properties="equipoMedida.equipo, expediente.num_expediente, expediente.operador.razon_social, equipoMedida.instalacion.nombre_instalacion, equipoMedida.marca_y_modelo, fecha, cumple_equipo_medida, notas_aclaratorias" />-->
        <datatable>
            <column id="column_equipo" headerText="Equipo" filtering="false" ordering="false" value="${entity.equipoMedida.equipo}"/>
            <column id="column_num_expediente" headerText="Nº Exp." filtering="false" ordering="false" value="${entity.expediente.num_expediente}"/>
            <column id="column_razon_social" headerText="Razón social" filtering="false" ordering="false" value="${entity.expediente.operador.razon_social}"/>
            <column id="column_nombre_instalacion" headerText="Instalación" filtering="false" ordering="false" value="${entity.equipoMedida.instalacion.nombre_instalacion}"/>
            <column id="column_marca_y_modelo" headerText="Marca y modelo" filtering="false" ordering="false" value="${entity.equipoMedida.marca_y_modelo}"/>
            <column id="column_fecha" headerText="Fecha" filtering="true" ordering="true" value="${entity.fecha}">
                <filter property="fecha" matching="contains" valueExpression="${this.column_fecha}"/>
                <order property="fecha"/>
            </column>
            <column id="column_cumple_equipo_medida" headerText="Cumple equipo medida" filtering="true" ordering="true" value="${entity.cumple_equipo_medida}">
                <filter property="cumple_equipo_medida" matching="contains" valueExpression="${this.column_cumple_equipo_medida}"/>
                <order property="cumple_equipo_medida"/>
            </column>
            <column id="column_notas_aclaratorias" headerText="Notas aclaratorias" filtering="true" ordering="true" value="${entity.notas_aclaratorias}">
                <filter property="notas_aclaratorias" matching="contains" valueExpression="${this.column_notas_aclaratorias}"/>
                <order property="notas_aclaratorias"/>
            </column>
        </datatable>
        <buttonbar type="fab"/>
    </list>
    <edit id="editVerifEquiposMedida">
        <form id="formVerificacionEquipoMedida">

            <p value=""/>
            <p backgroundColor="#26a69a" fontSize="22" fontColor="#FFFFFF" bold="true" value="VERIFICACIÓN EQUIPO DE MEDIDA"/>

            <p value=""/>
            <divisor color="#00766C" strokeWidth="8" />
            <p bold="true" value="EXPEDIENTE: "/>
            <divisor color="#00766C" strokeWidth="8" />

            <table border="false">
                <row>
                    <table headerText=" Id. Exp., Nº Expediente, Operador" weights="25, 35, 40" >
                        <row>
                            <input value="${entity.expediente_id}" placeHolder="${not empty(params.expediente_id)?params.expediente_id:null}" readonly="true"/>
                            <textarea value="${entity.expediente.num_expediente}" placeHolder="${not empty(params.num_expediente)?params.num_expediente:null}" readonly="true" />
                            <textarea value="${entity.equipoMedida.instalacion.operador.razon_social}" placeHolder="${not empty(params.razon_social)?params.razon_social:null}" readonly="true" />
                        </row>
                    </table>
                </row>
            </table>

            <p value=""/>
            <divisor color="#00766C" strokeWidth="8" />
            <p bold="true" value="INSTALACION: "/>
            <divisor color="#00766C" strokeWidth="8" />

            <table border="false">
                <row>
                    <table headerText=" Id. , Nombre instalación" weights="25, 75">
                        <row>
                            <input id="instalacion_id" value="${entity.instalacion_id}" placeHolder="${not empty(params.instalacion_id)?params.instalacion_id:null}" readonly="true"/>
                            <textarea value="${entity.equipoMedida.instalacion.nombre_instalacion}" placeHolder="${not empty(params.nombre_instalacion)?params.nombre_instalacion:null}" readonly="true" />
                        </row>
                    </table>
                </row>
            </table>

            <p value=""/>
            <divisor color="#00766C" strokeWidth="8" />
            <p bold="true" value="EQUIPO DE MEDIDA: "/>
            <divisor color="#00766C" strokeWidth="8" />

            <autocomplete id="equipo" label="8.1 Equipo: " forceSelection="true" repo="equipoMedidaRepo" value="${entity.equipo_medida_id}" validator="required">
                <options labelExpression="${entity.equipo+' ('+entity.marca_y_modelo+')'}" labelFilteringProperty="equipo" valueProperty="equipo_medida_id" />
                <repofilter>
                    <eq property="instalacion_id" value="${view.instalacion_id}" mandatory="true"/>
                    <contains property="equipo" value="${this.value}"/>
                </repofilter>
            </autocomplete>

            <date label="8.2 Fecha calibración: " value="${entity.fecha}" />

            <radio label="8.3 Cumple: " value="${entity.cumple_equipo_medida}" orientation="horizontal" weights="15, 85">
                <options>
                    <option label="Sí" value="S" />
                    <option label="No" value="N" />
                </options>
            </radio>

            <textarea label="8.4 Notas aclaratorias: " value="${entity.notas_aclaratorias}" />
        </form>
        <!--<actions>
            <save label="Save" route="${not empty (params.backRoute)? params.backRoute : 'verifEquipoMedida-listVerifEquiposMedida'}" registerInHistory="false" restoreView="true">
                <param name="entityId" value="${params.expediente_id}" />
            </save>
            <cancel label="Cancel" route="${not empty (params.backRoute)? params.backRoute : 'verifEquipoMedida-listVerifEquiposMedida'}" restoreView="true">
                <param name="entityId" value="${params.expediente_id}" />
            </cancel>
            <delete label="Delete" route="${empty (entity.equipo_medida_id) ? null : (not empty (params.backRoute)? params.backRoute : 'verifEquipoMedida-listVerifEquiposMedida')}" registerInHistory="false" message="No puede realizar esta acción: No existe verificación del equipo de medida" restoreView="true">
                <param name="entityId" value="${params.expediente_id}" />
            </delete>
        </actions>-->

        <buttonbar type="bottom">
            <button label="Save">
                <action type="save" route="back" registerInHistory="false" restoreView="true">
                    <param name="entityId" value="${params.expediente_id}" />
                </action>
            </button>

            <button label="Cancel">
                <action type="cancel" route="back" restoreView="true">
                    <param name="entityId" value="${params.expediente_id}" />
                </action>
            </button>

            <button label="Delete" readonly="${empty (entity.verificacion_equipo_medida_id)}" readonlyMessage="No puede realizar esta acción: No existe verificación del equipo de medida">
                <action type="delete" route="back" registerInHistory="false" restoreView="true">
                    <param name="entityId" value="${params.expediente_id}" />
                </action>
            </button>
        </buttonbar>

    </edit>
</main>
