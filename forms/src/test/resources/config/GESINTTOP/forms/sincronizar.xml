<main name="Sincronizar" description="Sincronizar" id="sincronizar" repo="visitaRepo">
    <list name="SINCRONIZAR" description="Proceso de sincronización">
        <datatable numVisibleRows="3" id="datatableSincronizar">
            <column id="column_visita_id" headerText="Id. Visita" filtering="true" ordering="true" value="${entity.visita_id}">
                <filter property="visita_id" matching="contains" valueExpression="${this.column_visita_id}"/>
                <order property="visita_id"/>
            </column>
            <column id="column_visita" headerText="Visita" filtering="true" ordering="true" value="${entity.visita}">
                <filter property="visita" matching="contains" valueExpression="${this.column_visita}"/>
                <order property="visita"/>
            </column>
            <column id="recinto" headerText="Recinto" filtering="false" ordering="false" value="${entity.recinto.c_refrec}"/>
            <column id="position" headerText="Posición" filtering="false" ordering="false" value="${entity.position}"/>
            <action type="nav" route="idVisita-editVisita"/>
        </datatable>
        <buttonbar type="fab"/>
        <script>
            function updateDatatable() {
                vh.updateWidget('datatableSincronizar');
             }
        </script>
        <form>
            <p value="" />
            <button label="Sincronizar" confirmation="true" labelConfirmation="Se va a iniciar el proceso de sincronización. Debe reiniciar la aplicación cuando éste finalice.">
                <action id="compositeAction">
                    <action registerInHistory="false" type="job">
                        <param name="jobId" value="gesinttop_sync_job_cmd" />
                        <param name="resourceFilter" value="none"/>
                        <param name="userId" value="mungarro"/>
                    </action>
                    <action type="js" registerInHistory="false">
                        <param name="method" value="updateDatatable" />
                    </action>
                </action>
            </button>
          </form>
    </list>
</main>