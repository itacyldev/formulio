<main name="Form Superheroes" description="Simple form with image example." id="formSups"
    repo="superHRepo">
    <list name="Superheroes list">
        <datatable properties="id, name, real_name" />
    </list>
    <edit>
        <form>
            <tab>
                <tabitem label="Personal Data">
                    <table headerText="Name,Real Name">
                        <row>
                            <input hasDeleteButton="false" validator="required"
                                value="${entity.name}" />
                            <input hasDeleteButton="false" validator="required"
                                value="${entity.real_name}" />
                        </row>
                        <row colspans="2">
                            <p bold="true" italic="true" underlined="true" uppercase="true"
                                value="bio" />
                        </row>
                        <row colspans="2">
                            <p value="${entity.bio}" />
                        </row>
                    </table>
                    <radio label="Purpose in live:" orientation="horizontal" validator="required"
                        value="${entity.character_type}">
                        <options>
                            <option label="It's a villain" value="villain" />
                            <option label="He really trusts in justice" value="hero" />
                            <option label="Depending on the day" value="nsnc" />
                        </options>
                    </radio>
                    <image repo="superHImages" value="${entity.image}" />
                    <image
                        value="superheroes/${entity.name.toLowerCase().replace(' ','_')+'.jpg'}" />
                    <image converter="b64Image" embedded="true" value="${entity.image_thumb}" />
                    <input type="date" value="${entity.creation_date}" />
                    <input readonly="true" value="${entity.update_date}" />
                </tabitem>
                <tabitem label="Relations">
                    <!--
                    <image repo="superHImages" value="${entity.image}" />
                    <image converter="b64Image" embedded="true" value="${entity.image_thumb}" />
                    -->

                    <p value="Sworn Emeny" />

                    <autocomplete converter="integer" forceSelection="true" id="sworn_enemy_auto"
                        repo="superHRepo" validator="required" value="${entity.sworn_enemy}">
                        <options labelExpression="${entity.name}" labelFilteringProperty="name"
                            valueProperty="id" />
                    </autocomplete>

                    <image converter="b64Image" height="200" readonly="true"
                        repo="superHImagesDBRepo" repoProperty="image_thumb"
                        value="${entity.sworn_enemy}" width="300" />

                    <p value="Super-Heroe relations" />
                    <datatable properties="id,super_id,other_id,other.name" repo="superRelRepo">
                        <repofilter>
                            <eq property="super_id" value="${entity.id}" />
                        </repofilter>
                    </datatable>
                </tabitem>
            </tab>
        </form>
    </edit>
</main>
