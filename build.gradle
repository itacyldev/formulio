// Top-level build file where you can add configuration options common to all sub-projects/modules.
buildscript {
    repositories {
        flatDir{
            dirs 'libs'
        }
        google()
        jcenter()
        mavenLocal()
        maven {
            name "ITACyL - thirdparty"
            url "http://repo.itacyl.es/archiva/repository/thirdparty/"
        }
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:3.6.1'
        classpath 'org.codehaus.groovy:groovy-android-gradle-plugin:2.0.0'
    }
}

allprojects {
    repositories {
        google()
        jcenter()
        mavenLocal()
        def androidHome = System.getenv("ANDROID_HOME")
        maven {
            name "sdk android extras"
            url "$androidHome/extras/android/m2repository/"
        }
        maven {
            name "sdk google extras"
            url "$androidHome/extras/google/m2repository/"
        }
        maven {
            url 'https://maven.google.com'
        }
        maven {
            name "ITACyL - internal"
            url "http://repo.itacyl.es/archiva/repository/internal/"
        }
        maven {
            name "ITACyL - thirdparty"
            url "http://repo.itacyl.es/archiva/repository/thirdparty/"
        }
        maven {
            name "ITACyL - snapshots"
            url "http://repo.itacyl.es/archiva/repository/snapshots/"
        }
    }

    configurations.all {
        resolutionStrategy.eachDependency { details ->
            if (details.requested.name == 'xpp3_min') {
                details.useTarget group: details.requested.group, name: 'xpp3', version: details.requested.version
                details.because "Se prefiere 'xpp3' que es una version completa de 'xpp3_min'"
            }
            if (details.requested.group == "androidx") {
                if (!details.requested.name.startsWith("multidex")) {
                    details.useVersion "${ext.targetSdkVersion}.+"
                }
            }
        }
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

ext {
    versionCode = 1
    versionName = '0.1.0'
    applicationId = "es.jcyl.ita.frmdrd"
    compileSdkVersion = 28
    targetSdkVersion = 28
    minSdkVersion = 21
    buildToolsVersion = '29.0.1'
    encoding = "UTF-8"

    commonDependencies = [

            appCompat        : 'androidx.appcompat:appcompat:1.0.2',
            cardView         : 'androidx.cardview:cardview:1.0.0',
            design           : 'com.google.android.material:material:1.0.0-rc01',
            constraint_layout: 'androidx.constraintlayout:constraintlayout:1.1.3',
            coordinatorlayout: 'androidx.coordinatorlayout:coordinatorlayout:1.0.0-alpha1',
            jexl: 'org.apache.commons:commons-jexl3:3.1',
            commonsLang  : 'commons-lang:commons-lang:2.6',
            commonsLogging  : 'commons-logging:commons-logging:1.2',
            dagger: 'com.google.dagger:dagger:2.15',
            commonsBeanutils: 'commons-beanutils:commons-beanutils:1.9.3',



    ] 
}