// Top-level build file where you can add configuration options common to all sub-projects/modules.
buildscript {
    repositories {
        flatDir {
            dirs 'libs'
        }
        google()
        jcenter()
        maven {
            url 'https://maven.google.com'
        }

    }
    dependencies {
        classpath 'com.android.tools.build:gradle:4.0.0'
        classpath 'org.codehaus.groovy:groovy-android-gradle-plugin:2.0.0'
    }
}


allprojects {
    repositories {
        mavenLocal()
        mavenCentral()
        google()
        jcenter()
        maven {
            url 'https://maven.google.com'
        }
//        def androidHome = System.getenv("ANDROID_HOME")
//        maven {
//            name "sdk android extras"
//            url "$androidHome/extras/android/m2repository/"
//        }
//        maven {
//            name "sdk google extras"
//            url "$androidHome/extras/google/m2repository/"
//        }

//        maven {
//            name "ITACyL - snapshots"
//            url "http://repo.itacyl.es/archiva/repository/snapshots/"
//        }
//        maven {
//            name "ITACyL - internal"
//            url "http://repo.itacyl.es/archiva/repository/internal/"
//        }
//        maven {
//            name "ITACyL - thirdparty"
//            url "http://repo.itacyl.es/archiva/repository/thirdparty/"
//        }
    }

    configurations.all {
        resolutionStrategy.eachDependency { details ->
            if (details.requested.name == 'xpp3_min') {
                details.useTarget group: details.requested.group, name: 'xpp3', version: details.requested.version
                details.because "Se prefiere 'xpp3' que es una version completa de 'xpp3_min'"
            }
            if (details.requested.group == "androidx") {
                if (!details.requested.name.startsWith("multidex")) {
                    details.useVersion "${ext.targetSdkVersion}.+"
                }
            }
        }
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}

ext {
    versionCode = 1
    versionName = '0.1.0'
    applicationId = "es.jcyl.ita.frmdrd"
    compileSdkVersion = 29
    targetSdkVersion = 29
    minSdkVersion = 21
    buildToolsVersion = '29.0.1'
    encoding = "UTF-8"
}